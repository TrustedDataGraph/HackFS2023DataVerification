const fs = require("fs").promises; // this is the standard module to work with files

const array = [
  {
    project_id: "61fe7a2c740f1aac5ffe6f8c",
    deal_id: "7044394",
    deal_start_epoch: 1885606,
    miner_id: "f0838684",
    payload_cid:
      "bafykbzacebvzruoat4nvkxhoghopw6wdoaqozyjac5vrmtikojs4gcnjv7rs4",
    data_size: 34359738368,
    filename: "train659.tar",
    file_format: ".tar",
    curated_dataset: "Open Images Dataset",
    location: "CZ",
    phase: "2.8",
    miner_peer: "12D3KooWLxthSNyYBzgvqjZ8dbPnybTQqeq45nNCdnMqXj3Dq86a",
    miner_multi_addrs:
      "/ip4/82.208.52.157/tcp/24001 /ip4/185.14.234.118/tcp/24001 ",
  },
  {
    project_id: "61fe7a2c740f1aac5ffe6f8c",
    deal_id: "7067926",
    deal_start_epoch: 1887476,
    miner_id: "f0838684",
    payload_cid:
      "bafykbzacedg3y6vyqglsvmchc6i6mny33hgumbhsnkvtqdf3cfzfgl56442bg",
    data_size: 34359738368,
    filename: "train661.tar",
    file_format: ".tar",
    curated_dataset: "Open Images Dataset",
    location: "CZ",
    phase: "2.8",
    miner_peer: "12D3KooWLxthSNyYBzgvqjZ8dbPnybTQqeq45nNCdnMqXj3Dq86a",
    miner_multi_addrs:
      "/ip4/82.208.52.157/tcp/24001 /ip4/185.14.234.118/tcp/24001 ",
  },
  {
    project_id: "61fe7a2c740f1aac5ffe6f8c",
    deal_id: "7067927",
    deal_start_epoch: 1887682,
    miner_id: "f0838684",
    payload_cid:
      "bafykbzacebqoswew25mt37fw44kc5rc46pkuw7euanreby24by7a6rbc45oog",
    data_size: 34359738368,
    filename: "train663.tar",
    file_format: ".tar",
    curated_dataset: "Open Images Dataset",
    location: "CZ",
    phase: "2.8",
    miner_peer: "12D3KooWLxthSNyYBzgvqjZ8dbPnybTQqeq45nNCdnMqXj3Dq86a",
    miner_multi_addrs:
      "/ip4/82.208.52.157/tcp/24001 /ip4/185.14.234.118/tcp/24001 ",
  },
  {
    project_id: "61fe7a2c740f1aac5ffe6f8c",
    deal_id: "7080301",
    deal_start_epoch: 1888450,
    miner_id: "f0838684",
    payload_cid:
      "bafykbzaceddck3z3himgbiriaoofo2wmdb6qqzp5wp3r63g4qbryemzipw7mc",
    data_size: 34359738368,
    filename: "train667.tar",
    file_format: ".tar",
    curated_dataset: "Open Images Dataset",
    location: "CZ",
    phase: "2.8",
    miner_peer: "12D3KooWLxthSNyYBzgvqjZ8dbPnybTQqeq45nNCdnMqXj3Dq86a",
    miner_multi_addrs:
      "/ip4/82.208.52.157/tcp/24001 /ip4/185.14.234.118/tcp/24001 ",
  },
  {
    project_id: "61fe7a2c740f1aac5ffe6f8c",
    deal_id: "7080302",
    deal_start_epoch: 1888378,
    miner_id: "f0838684",
    payload_cid:
      "bafykbzaceb4bhvoqvu73ehxva2qjjjmgeqkjn6borwdlzfwuk5acazay4p2jk",
    data_size: 34359738368,
    filename: "train669.tar",
    file_format: ".tar",
    curated_dataset: "Open Images Dataset",
    location: "CZ",
    phase: "2.8",
    miner_peer: "12D3KooWLxthSNyYBzgvqjZ8dbPnybTQqeq45nNCdnMqXj3Dq86a",
    miner_multi_addrs:
      "/ip4/82.208.52.157/tcp/24001 /ip4/185.14.234.118/tcp/24001 ",
  },
  {
    project_id: "61fe7a2c740f1aac5ffe6f8c",
    deal_id: "7080303",
    deal_start_epoch: 1890939,
    miner_id: "f0838684",
    payload_cid:
      "bafykbzaceaymhnufwm6spsioy4n2bsmnrdcg3aw62ctamn3iugof5byqga3yi",
    data_size: 34359738368,
    filename: "train671.tar",
    file_format: ".tar",
    curated_dataset: "Open Images Dataset",
    location: "CZ",
    phase: "2.8",
    miner_peer: "12D3KooWLxthSNyYBzgvqjZ8dbPnybTQqeq45nNCdnMqXj3Dq86a",
    miner_multi_addrs:
      "/ip4/82.208.52.157/tcp/24001 /ip4/185.14.234.118/tcp/24001 ",
  },
  {
    project_id: "61fe7a2c740f1aac5ffe6f8c",
    deal_id: "7080300",
    deal_start_epoch: 1888306,
    miner_id: "f0838684",
    payload_cid:
      "bafykbzacednwpk6pjluvv2ynmuiet5ytigoxe5hhofxvqnxqe5qo5hzljo3q6",
    data_size: 34359738368,
    filename: "train665.tar",
    file_format: ".tar",
    curated_dataset: "Open Images Dataset",
    location: "CZ",
    phase: "2.8",
    miner_peer: "12D3KooWLxthSNyYBzgvqjZ8dbPnybTQqeq45nNCdnMqXj3Dq86a",
    miner_multi_addrs:
      "/ip4/82.208.52.157/tcp/24001 /ip4/185.14.234.118/tcp/24001 ",
  },
  {
    project_id: "61fe7a2c740f1aac5ffe6f8c",
    deal_id: "7080304",
    deal_start_epoch: 1890868,
    miner_id: "f0838684",
    payload_cid:
      "bafykbzacedyd5hf3b3wt6xyzi6ngy7ttm4rp3w2fuvcr6woky2toxuycs6jo6",
    data_size: 34359738368,
    filename: "train673.tar",
    file_format: ".tar",
    curated_dataset: "Open Images Dataset",
    location: "CZ",
    phase: "2.8",
    miner_peer: "12D3KooWLxthSNyYBzgvqjZ8dbPnybTQqeq45nNCdnMqXj3Dq86a",
    miner_multi_addrs:
      "/ip4/82.208.52.157/tcp/24001 /ip4/185.14.234.118/tcp/24001 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7629030",
    deal_start_epoch: 1940431,
    miner_id: "f03223",
    payload_cid: "bafybeielt6cevxh4v32oscimbpcevd6f2smilq56oj64wwn55aif57cmnm",
    data_size: 34359738368,
    filename: "TFDS-main-16837",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWPGM5Ub5Zhm3zhrzbbbcUZZJc2aw4tRmWTRzsuW3esUW7",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64561 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7623740",
    deal_start_epoch: 1940453,
    miner_id: "f03223",
    payload_cid: "bafybeigt5igxvpe2uq7p4kipz4dnzapcw4tnq43zlu7e6mocmxfprz4wzi",
    data_size: 34359738368,
    filename: "TFDS-main-16851",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWPGM5Ub5Zhm3zhrzbbbcUZZJc2aw4tRmWTRzsuW3esUW7",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64561 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7629562",
    deal_start_epoch: 1940491,
    miner_id: "f02301",
    payload_cid: "bafybeih4isau7ojx3vi7j5bpad4ptql6auney3iiurjta75qmbx75rsyzu",
    data_size: 34359738368,
    filename: "TFDS-main-16810",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWSTo41sjDVRTWMnW2NrDkUD5MvAHMX7BqWc6uNSSWN1zA",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64581 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7629545",
    deal_start_epoch: 1940501,
    miner_id: "f03223",
    payload_cid: "bafybeiba6s3d54najeht5r63i2br6dl4e6hdigkhg3jbkilfh5w5j4ljhm",
    data_size: 34359738368,
    filename: "TFDS-main-16821",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWPGM5Ub5Zhm3zhrzbbbcUZZJc2aw4tRmWTRzsuW3esUW7",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64561 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7630185",
    deal_start_epoch: 1940528,
    miner_id: "f02301",
    payload_cid: "bafybeifg3qjupxrg7r72odwn6bcyue6liqkzvyzexxtflqumkkgoxinz3q",
    data_size: 34359738368,
    filename: "TFDS-main-16818",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWSTo41sjDVRTWMnW2NrDkUD5MvAHMX7BqWc6uNSSWN1zA",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64581 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7629029",
    deal_start_epoch: 1940566,
    miner_id: "f03223",
    payload_cid: "bafybeihvjmu2bnozzd4r7ksq4yujkl7uiwwnam6touf563fmqjfjddfppu",
    data_size: 34359738368,
    filename: "TFDS-main-16838",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWPGM5Ub5Zhm3zhrzbbbcUZZJc2aw4tRmWTRzsuW3esUW7",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64561 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7622458",
    deal_start_epoch: 1940574,
    miner_id: "f03223",
    payload_cid: "bafybeigcvbyfahjcfgfpdim7i7bokqvbaykrwgqyw637ey6xdbeidutmzy",
    data_size: 34359738368,
    filename: "TFDS-main-16808",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWPGM5Ub5Zhm3zhrzbbbcUZZJc2aw4tRmWTRzsuW3esUW7",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64561 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7630716",
    deal_start_epoch: 1940642,
    miner_id: "f03223",
    payload_cid: "bafybeidmkfjn46ehdhwyolrz43jzwicprbayzzrdsoswzq65ubvytysddi",
    data_size: 34359738368,
    filename: "TFDS-main-16824",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWPGM5Ub5Zhm3zhrzbbbcUZZJc2aw4tRmWTRzsuW3esUW7",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64561 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7630714",
    deal_start_epoch: 1940643,
    miner_id: "f03223",
    payload_cid: "bafybeif266czhzv4qwlt44krhqzn5ewysizmhztqytyudgsyodxa3mwiru",
    data_size: 34359738368,
    filename: "TFDS-main-16840",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWPGM5Ub5Zhm3zhrzbbbcUZZJc2aw4tRmWTRzsuW3esUW7",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64561 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7626215",
    deal_start_epoch: 1940681,
    miner_id: "f03223",
    payload_cid: "bafybeick65apeodiqaiel4qft4xijnoqhnxqb6pescsvoofnazy2ncavwi",
    data_size: 34359738368,
    filename: "TFDS-main-16839",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWPGM5Ub5Zhm3zhrzbbbcUZZJc2aw4tRmWTRzsuW3esUW7",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64561 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7631825",
    deal_start_epoch: 1940687,
    miner_id: "f02301",
    payload_cid: "bafybeibgrklag2qbsphaa6cbdd5b6ftypm7y3frzarslb2jc5yel3xyur4",
    data_size: 34359738368,
    filename: "TFDS-main-16861",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWSTo41sjDVRTWMnW2NrDkUD5MvAHMX7BqWc6uNSSWN1zA",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64581 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7631103",
    deal_start_epoch: 1940690,
    miner_id: "f02301",
    payload_cid: "bafybeidqliopqlom6teeqk5c3omzwz3vzwhomerqgl4r4p23bgcgajvgy4",
    data_size: 34359738368,
    filename: "TFDS-main-16852",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWSTo41sjDVRTWMnW2NrDkUD5MvAHMX7BqWc6uNSSWN1zA",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64581 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7634046",
    deal_start_epoch: 1940847,
    miner_id: "f02301",
    payload_cid: "bafybeifxsffasvl3lkakbc3cqrtjdqjeidz6c6apecmefgylap5sh2mxc4",
    data_size: 34359738368,
    filename: "TFDS-main-16860",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWSTo41sjDVRTWMnW2NrDkUD5MvAHMX7BqWc6uNSSWN1zA",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64581 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7634706",
    deal_start_epoch: 1940917,
    miner_id: "f02301",
    payload_cid: "bafybeibut3dwkveb6vgt3rqo3si7z6uvxwzskzub2oop5wm6qw4tj4hoh4",
    data_size: 34359738368,
    filename: "TFDS-main-16822",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWSTo41sjDVRTWMnW2NrDkUD5MvAHMX7BqWc6uNSSWN1zA",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64581 ",
  },
  {
    project_id: "62340a567d907fffc878620d",
    deal_id: "7630024",
    deal_start_epoch: 1941059,
    miner_id: "f03223",
    payload_cid: "bafybeidq5k2fdmgghdagdszutboihm6dcan4fncmmd6j4qzb4g3i4krru4",
    data_size: 34359738368,
    filename: "TFDS-main-16848",
    file_format: ".folder",
    curated_dataset: "TerraFusion",
    location: "US",
    phase: "2.8",
    miner_peer: "12D3KooWPGM5Ub5Zhm3zhrzbbbcUZZJc2aw4tRmWTRzsuW3esUW7",
    miner_multi_addrs: "/ip4/159.65.189.52/tcp/64561 ",
  },
];

// Array has many functions to help you, like .map in this case.
// https://devdocs.io/javascript-array/
const arrayOfPromises = array.map((jsonFileContent, idx) => {
  // I get each occurrence of `array` as parameter and I return back a Promise to avoid to block the Nodejs event loop:
  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise
  return fs.writeFile(
    `./data/DataTrustedGraph_${idx + 1}.json`,
    JSON.stringify(jsonFileContent, null, 2)
  );
});

// I need to wait for async operation to understand when it is finished
Promise.all(arrayOfPromises)
  .then(() => {
    console.log("files created");
  })
  .catch((err) => {
    console.log("error creating the files", err);
  });
